# Linux基础



[教程](https://www.bilibili.com/video/BV13U4y1p7kB)

## 1.  Linux命令



### 1.1 重定向操作

```shell
echo  helloworld	#在终端输出helloworld
echo helloworld > tmp	#将helloworld写入到temp文件中，会覆盖文件中原有的内容
echo helloworld >> tmp  #以追加的方式添加内容
```



### 1.2  压缩和解压命令 tar

1. **压缩**

   tar只能打包文件，不能够压缩文件。压缩工具：`gzip` `bzip2` ,但是不能打包压缩文件，每个文件都会生成一个单独的压缩包，并且压缩之后不会保留原文件

   > 如果使用 `tar` 完成文件压缩，涉及的的参数如下，在使用过程中没有先后顺序
   
   * `c`: 创建压缩文件
   * `z`: 使用`gzip` 的方式进行文件压缩
   * `j`: 使用`bzip2` 的方式进行文件压缩
   * `v`: 压缩过程中显示压缩信息，可以省略不写
   * `f`: 指定压缩包的名字
   
   > 一般认为 `.tgz` 文件等同于 `.tar.gz` 文件，因此它们的压缩方式是相同的
   
   ```shell
   #语法
   $ tar [参数] [生成的压缩包的名字] [要压缩的文件（文件或目录）]
   
   #备注: 关于生成的压缩包的名字，建议使用标准后缀，方便识别
   #	  -压缩使用gzip方式， 标准后缀格式为： .tar.gz
   #	  -压缩使用bzip2方式，标准后缀格式为： .tar.bz2
   ```
   
   > 举例： 使用 `gzip` 的方式进行文件压缩
   
   ```shell
   $ tar czvf all.tar.gz tmp.txt  temp/  #使用gzip压缩文件
   $ tar cjvf all.tar.bz2 tmp.txt  temp/  #使用把bzip2压缩文件
   
   ```
   
   



2. **解压**

   > 如果使用`tar` 进行文件的解压缩，设计的参数如下，在使用过程中参数没有先后顺序

   * `x`: 释放压缩文件内容
   * `z`: 使用 `gzip` 的方式进行文件解压缩，压缩包后缀为`.tar.gz`
   * `j`: 使用`bzip2` 的方式进行文件解压缩，压缩包后缀为`.tar.bz2`

   * `v`: 解压缩过程中显示解压缩信息
   * `f`: 指定压缩包的名字

   > 使用以上参数是将压缩包解压到当前目录，如果需要解压到指定目录，需要指定参数 `-c`, 一般认为 `.tgz` 文件等同于 `.tar.gz` 文件，解压缩方式是相同的，解压缩的语法格式如下：

   ```shell
   #语法1： 解压到当前目录中
   $ tar [参数] [压缩包名]
   
   #语法2： 解压到指定目录中
   $ tar [参数] [压缩包名] -C [解压目录]
   ```

   > 举例：使用`gzip` 的方式进行文件压缩

   ```shell
   # 将 all.tar.gz 压缩包解压缩到 temp 目录中
   $ tar zxvf all.tar.gz -C temp
   
   ```
   
   > 举例：使用bzip2的方式进行文件解压缩
   
   ```shell
   # 将 part.tar.bz2 中的文件加压缩到 temp 目录中
   $ tar jxvf part.tar.bz2 -C temp
   
   ```



### 1.3 zip

> zip格式的压缩包在Linux中也是常见的，在某些版本中需要安装才能使用

Ubuntu中安装zip

```shell
$ sudo apt install zip		#压缩
$ sudo apt install unzip	#解压缩
```



1. **压缩（.zip）**

   > 使用 `zip` 压缩目录需要注意一点，必须添加参数 `-r` ，这样才能将子目录中的文件一并压缩，如果要压缩的文件中没有哦目录，该参数可以不写
   >
   > 另外使用 `zip` 压缩文件，会自动生产文件后缀`.zip` ，因此就不需要额外指定了

   ```shell
   #语法：
   $ zip [-r] [压缩包名] [要压缩的文件]
   ```

   > 举例

   ```shell
   # 压缩目录 get 和文件 onepiece.txt robin.txt 得到压缩包 all.zip(不需要指定后缀, 自动添加)
   $ zip all onepiece.txt robin.txt get/ -r
   ```

   

2. **解压缩（.zip）**

   > 对应 zip 格式的文件解压缩，必须要使用 unzip 命令，和压缩的时候使用的命令是不一样的。如果压缩包中的文件要解压到指定目录需要指定参数 -d, 默认是解压缩到当前目录中。

   ```shell
   # 语法1: 解压到当前目录中 
   $ unzip 压缩包名
   
   # 语法: 解压到指定目录, 需要添加参数 -d
   $ unzip 压缩包名 -d 解压目录
   
   ```

   > 举例

   ```shell
   
   # 将 all.zip 解压缩到 temp 目录中
   $ unzip all.zip -d temp/
   ```



### 1.4 rar

> `rar` 这种压缩格式在 Linux 中并不常用，这是 Windows 常用的压缩格式，如果想要在 Linux 压缩和解压这种格式的文件需要额外安装对应的工具，不同版本的 Linux 安装方式也是不同的。

Ubuntu安装rar

```shell
sudo apt install rar
```



1. **压缩（.rar）**

   > 使用 `rar` 压缩过程中的注意事项和 `zip` 是一样的，`如果压缩的是目录, 需要指定参 -r`, 如果只压缩文件就不需要添加了。压缩过程中需要使用参数` a (archive)`, 压缩归档的意思。
   >
   > `rar` 工具在生成压缩包的时候也会自动添加后缀，名字为`.rar`, 因此我们只需要指定压缩包的名字

   ```shell
   # 文件压缩, 需要使用参数 a, 压缩包名会自动添加后缀 .rar
   # 如果压缩了目录, 需要加参数 -r
   # 语法: 
   $ rar a 压缩包名 要压缩的文件 [-r]
   
   # 压缩文件 onepiece.txt, robin.txt 和目录 get/ 到要是文件 all.rar 中
   $ rar a all onepiece.txt get/ robin.txt -r 
   ```



2. **解压缩（.rar）**

   >解压缩`.rar `格式的文件的时候，可以使用`rar` 也可以使用 `unrar`, 操作方式是一样的，需要添加参数 `x`, 默认是将压缩包内容释放到当前目录中，如果要释放到指定目录直接指定解压目录名即可，不需要使用任何参数。

   ```shell
   # 解压缩: 需要参数 x
   # 语法: 解压缩到当前目录中
   $ rar/unrar x 压缩包名字
   
   # 语法: 解压缩到指定目录中
   rar/unrar x 压缩包名字 解压目录
   
   ```

   > 举例

   ```shell
   # 将 all.rar 中的文件解压缩到 temp 目录中
   $ rar x all.rar temp/ 
   ```

   



### 1.5  xz

> `.xz` 格式的文件压缩和解压缩都相对比较麻烦，通过一个命令是完不成对应的操作的，需要通过两步操作才行。并且操作过程中需要使用 `tar` 工具进行打包，压缩使用的则是 `xz` 工具。



1. **压缩（.tar.xz）**

   >创建文件的步骤如下，首先 将需要压缩的文件打包 `tar cvf xxx.tar files`, 然后再对打包文件进行压缩 `xz -z xxx.tar`, 这样我们就可以得到一个打包之后的压缩文件了。
   >
   >使用 `xz` 工具压缩文件的时候需要添加参数 `-z`
   
   ```shell
   # 语法:
   # 第一步
   $ tar cvf xxx.tar 要压缩的文件
   # 第二步, 最终得到一个xxx.tar.xz 格式的压缩文件
   $ xz -z xxx.tar
   
   ```
   
   > 举例
   
   ```shell
   # 将文件 onepiece.txt, robin.txt 和目录 get 打包到 all.tar 中
   $ tar cvf all.tar onepiece.txt robin.txt get/
   
   ```



2. **解压缩（.tar.xz）**

   >解压缩的步骤和压缩的步骤相反，需要先解压缩，然后将文件包中的文件释放出来。
   >
   >使用 `xz`工具解压需要使用参数 `-d`。

   ```shell
   # 语法:
   # 第一步： 压缩包解压缩, 得到 xxx.tar
   $ xz -d xxx.tar.xz
   # 第二步: 将 xxx.tar 中的文件释放到当前目录
   $ tar xvf xxx.tar 			
   
   ```

   ```shell
   # 将 all.tar.xz 解压缩, 得到 all.tar
   $ xz -d all.tar.xz 
   
   ```



## 2. vim的使用

### 2.1  vim的模式

在vim中一共有三种模式，分别是 `命令模式` ，`末行模式` ，`编辑模式` ，当我们打开vim之后默认进入的是命令模式

* 命令模式：在该模式下我们可以进行`查看文件内容`，`修改文件` ，`关键的搜索`等操作
* 编辑模式：在该模式下主要对文件内容进行修改和内容添加
* 末行模式：在该模式下可以进行 `执行Linux命令` ，`保存文件` ，`进行行跳转`，`窗口分屏` 等操作



### 2.2 命令模式下的操作

* 命令

  ```shell
  ZZ   		#保存退出
  gg=G		#代码格式化	
  # 标准的移动光标的方法: 使用 h, j, k, l
  
                                          光标上移   
                                             ↑
                                             |
                       光标左移 <-- h    j    k    l --> 光标右移
                                         |
                                         ↓
                                      光标下移   
  ```



* 其他光标跳转命令

  |  快捷键  |        功能        |                      备注                       |
  | :------: | :----------------: | :---------------------------------------------: |
  |   `0`    |   光标移动到行首   |                      数字0                      |
  |   `$`    |  光标移动到行尾部  |                   `shift`+`4`                   |
  |   `gg`   |  光标移动到文件头  |                  第一行的开始                   |
  |   `G`    | 光标移动到文件尾部 |                 最后一行的开始                  |
  |   `nG`   |       行跳转       |             `n` 代表要跳转到哪一行              |
  | `n+回车` |    相对跳转n行     | 从光标所在当前行往下跳 n 行，n 对应的是一个整数 |

  ​                            

* 删除命令

  |  快捷键   |        功能        |                             备注                             |
  | :-------: | :----------------: | :----------------------------------------------------------: |
  | `x(小写)` | 删除光标后边的字符 |              vim中的光标比较宽会盖住后边的字符               |
  | `X(大写)` | 删除光标前边的字符 |                              无                              |
  |   `dw`    |      删除单词      | 要先把光标移动到单词的第一个字母上再删除, 否则单词只能被删除一部分 |
  |   `d0`    | 删除光标前的字符串 |           从字符串开头到光标当前位置的字符串被删除           |
  |  `d$(D)`  | 删除光标后的字符串 |   从光标当前位置到字符串尾部的字符串被删除，使用 `D` 也行    |
  |   `dd`    |   删除光标所在行   |                              无                              |
  |   `ndd`   |      删除n行       |                     从光标开始 删除`n`行                     |

  

* 撤销和反撤销

  |  快捷键  |  功能  |     备注     |
  | :------: | :----: | :----------: |
  |   `u`    |  撤销  | 等价`Ctrl+z` |
  | `Ctrl+r` | 反撤销 | 等价`Crtl+y` |



* 复制和粘贴

  | 快捷键 |          功能           |      备注       |
  | :----: | :---------------------: | :-------------: |
  |  `p`   | 粘贴到光标所在行的下边  |     `小写p`     |
  |  `P`   | 粘贴到光标所在行的上边  |     `大写P`     |
  |  `yy`  |    复制光标所在的行     |       无        |
  | `nyy`  | 从光标所在行向下复制n行 | n是要复制的行数 |



* 可视化模式

  `v`: 进入字符可视化模式，文本选择是以字符为单位的

  `V`: 进入行可视化模式，文本的选择是以行尾单位的

  `Ctrl+v`: 进入块可视化模式，可选择一个矩形内的文本

  

* 替换

  | 快捷键 |        功能        |      备注       |
  | :----: | :----------------: | :-------------: |
  |  `r`   | 替换光标的单个字符 |       无        |
  |  `R`   | 替换光标的多个字符 | 按`esc`结束替换 |

  

* 查找

  > 在 vim 的命令模式下一共有三种查找方式，首先需要在键盘上输入对应的字符，然后按回车键 vim 会进行关键字匹配，之后就可以通过 n 或者 N 进行关键字之间的切换了。

  

  | 搜索快捷键 | 关键字遍历 |      描述      | 备注 |
  | :--------: | :--------: | :------------: | ---- |
  |    `/`     |    `n`     | 从当前位置向下 |      |
  |            |    `N`     | 从当前位置向上 |      |
  |    `?`     |    `n`     | 从当前位置向上 |      |
  |            |    `N`     | 从当前位置向下 |      |
  |    `#`     |    `n`     | 从当前位置向上 |      |
  |            |    `N`     | 从当前位置向下 |      |

  

  

### 2.3 切换到编辑模式

> 从命令模式切换到编辑模式的操作



|   快捷键   |                            功能                            |
| :--------: | :--------------------------------------------------------: |
|    `i`     |                     从光标前边开始输入                     |
|    `a`     |                    从光标的后边开始输入                    |
|    `o`     |              在光标下边创建新行，在新行中输入              |
|    `s`     | 删除光标后边的字符（盖住的字符），从删除的字符位置开始输入 |
| `I(大写i)` |                    从当前行行首开始输入                    |
|    `A`     |                    从当前行行尾开始输入                    |
|    `O`     |               从光标上边创建新行，新行中输入               |
|    `S`     |                删除当前行，在当前行开始输入                |





### 2.4 末行模式下的操作



> 从命令模式切换到末行模式只需要在键盘上输入一个 :，同时这个符号也会出现在窗口的最下端，这时候我们就可以在最后一行输入我们执行的命令了。
>
> 从末行模式切换回命令模式有两种方式：
>
> 1. 按两次 Esc
> 2. 在末行模式下执行一个完整指令，执行完毕，自动回到命令模式



* 保存退出

  | 末行模式下的命令 |          功能          |
  | :--------------: | :--------------------: |
  |       `q`        | 退出，没保存会提示保存 |
  |       `q!`       |    强制退出(不保存)    |
  |       `w`        |      保存，不退出      |
  |       `wq`       |        保存退出        |
  |       `x`        |        保存退出        |

  

* 替换

  >替换对应的命令是 `s` 并且可以给其指定参数，默认情况下只替换相关行的第一个满足条件的关键字， 如果需要整行替换需要加参数 `/g`
  >

  |                末行模式下的替换命令                 |                            说明                            |
  | :-------------------------------------------------: | :--------------------------------------------------------: |
  |        `s/` 被替换的关键字 / 新的关键字 `/g`        |                   只对光标所在行进行替换                   |
  | 行号 1, 行号 2`s/` 被替换的关键字 / 新的关键字 `/g` | `[行号1 , 行号2]` 是一个从小到大的范围，对这个范围进行替换 |
  |       `%s/` 被替换的关键字 / 新的关键字 `/g`        |                  `%` 代表对所有行进行替换                  |

  

### 2.5 分屏

| 末行模式下的替换命令 |              说明              |                备注                |
| :------------------: | :----------------------------: | :--------------------------------: |
|         `sp`         |   水平分屏，多个窗口垂直排列   |  多个窗口中显示同一个文件里的内容  |
|        `vsp`         |   垂直分屏，多个窗口水平排列   |  多个窗口中显示同一个文件里的内容  |
|       `ctrl+p`       |    光标在打开的屏幕之间切换    | 快捷键操作(按住 ctrl 然后按两次 w) |
|        `qall`        |        同时退出多个屏幕        |                                    |
|       `wqall`        |      同时保存退出多个屏幕      |                                    |
|     `sp 文件名`      | 分屏的同时指定打开的文件的名字 |   在新窗口中显示指定的文件的内容   |
|     `vsp 文件名`     | 分屏的同时指定打开的文件的名字 |   在新窗口中显示指定的文件的内容   |

除了在命令模式下分屏，我们也可以在使用 vim 打开文件的时候直接分屏，下边是需要用到的参数:

`-o`: 水平分屏
`-O`: 垂直分屏

```shell
# 在vim打开文件的时候指定打开多个文件和分屏方式
# 水平分屏
$ vim -o 文件1, 文件2, 文件3 ...
# 垂直分屏
$ vim -O 文件1, 文件2, 文件3 ...
```

